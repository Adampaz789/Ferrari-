<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Editar Historia - Ferrari</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-dark text-light">

  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">Ferrari</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="nav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Historia</a></li>
          <li class="nav-item"><a class="nav-link active" href="edit.html">Editar Historia</a></li>
          <li class="nav-item"><a class="nav-link" href="contact.html">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container my-5">
    <h2>Editar la historia</h2>
    <p>Pega aquí tu parte de la historia y presiona Guardar:</p>

    <div id="editor" class="p-3 bg-white text-dark rounded" contenteditable="true" style="min-height:200px;">
      <p><strong>En 1929 Enzo Ferrari fundó la Scuderia Ferrari</strong> como equipo de carreras.</p>
    </div>

    <div class="mt-3">
      <button id="saveBtn" class="btn btn-primary">Guardar</button>
      <button id="restoreBtn" class="btn btn-secondary">Restaurar</button>
      <button id="previewBtn" class="btn btn-success">Vista previa</button>
      <span id="msg" class="ms-3 text-success" style="display:none">Guardado ✅</span>
    </div>
  </main>

  <footer class="bg-dark text-light text-center py-3">
    <small>Editor de historia</small>
  </footer>

  <script>
    const editor = document.getElementById('editor');
    const saveBtn = document.getElementById('saveBtn');
    const restoreBtn = document.getElementById('restoreBtn');
    const previewBtn = document.getElementById('previewBtn');
    const msg = document.getElementById('msg');

    const defaultText = "<p><strong>En 1929 Enzo Ferrari fundó la Scuderia Ferrari</strong> como equipo de carreras.</p>";

    document.addEventListener('DOMContentLoaded', () => {
      const saved = localStorage.getItem('ferrari_history');
      editor.innerHTML = saved || defaultText;
    });

    saveBtn.addEventListener('click', () => {
      localStorage.setItem('ferrari_history', editor.innerHTML);
      msg.style.display = 'inline';
      setTimeout(()=> msg.style.display='none', 2000);
    });

    restoreBtn.addEventListener('click', () => {
      editor.innerHTML = defaultText;
      localStorage.setItem('ferrari_history', defaultText);
    });

    previewBtn.addEventListener('click', () => {
      window.open('index.html', '_blank');
    });
  </script>
</body>
</html>
